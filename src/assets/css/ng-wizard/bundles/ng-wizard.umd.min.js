!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("@angular/common")):"function"==typeof define&&define.amd?define("ng-wizard",["exports","@angular/core","rxjs","@angular/common"],e):e((t=t||self)["ng-wizard"]={},t.ng.core,t.rxjs,t.ng.common)}(this,(function(t,e,n,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var r,s,a,c,p,h,u,l=function(){return(l=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function d(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function f(t,e){return function(n,o){e(n,o,t)}}function g(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function S(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(r=t.TOOLBAR_POSITION||(t.TOOLBAR_POSITION={})).none="none",r.top="top",r.bottom="bottom",r.both="both",(s=t.TOOLBAR_BUTTON_POSITION||(t.TOOLBAR_BUTTON_POSITION={})).start="start",s.end="end",(a=t.THEME||(t.THEME={})).default="default",a.arrows="arrows",a.circles="circles",a.dots="dots",(c=t.STEP_STATE||(t.STEP_STATE={})).normal="normal",c.disabled="disabled",c.error="error",c.hidden="hidden",function(t){t.untouched="untouched",t.done="done",t.active="active"}(p||(p={})),(h=t.STEP_DIRECTIN||(t.STEP_DIRECTIN={})).forward="forward",h.backward="backward",(u=t.STEP_POSITION||(t.STEP_POSITION={})).first="first",u.final="final",u.middle="middle";var b={selected:0,keyNavigation:!0,cycleSteps:!1,lang:{next:"Next",previous:"Previous"},toolbarSettings:{toolbarPosition:t.TOOLBAR_POSITION.bottom,toolbarButtonPosition:t.TOOLBAR_BUTTON_POSITION.end,showNextButton:!0,showPreviousButton:!0,toolbarExtraButtons:[]},anchorSettings:{anchorClickable:!0,enableAllAnchors:!1,markDoneStep:!0,markAllPreviousStepsAsDone:!0,removeDoneStepOnNavigateBack:!1,enableAnchorOnDoneStep:!0},theme:t.THEME.default},y=new e.InjectionToken("ngWizardCustom.config");function v(t,e){var n,o;try{for(var i=S(Object.keys(e)),r=i.next();!r.done;r=i.next()){var s=r.value;e[s]instanceof Object&&s in t&&Object.assign(e[s],v(t[s],e[s]))}}catch(t){n={error:t}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return Object.assign(t||{},e),t}var w=function(){function t(t){this.config=t,this._defaultConfig=l({},b),this.config&&(this._defaultConfig=v(this._defaultConfig,this.config)),this._resetWizard=new n.Subject,this._showNextStep=new n.Subject,this._showPreviousStep=new n.Subject,this._showStep=new n.Subject,this._setTheme=new n.Subject,this._stepChangedArgs=new n.Subject,this.resetWizard$=this._resetWizard.asObservable(),this.showNextStep$=this._showNextStep.asObservable(),this.showPreviousStep$=this._showPreviousStep.asObservable(),this.showStep$=this._showStep.asObservable(),this.setTheme$=this._setTheme.asObservable(),this.stepChangedArgs$=this._stepChangedArgs.asObservable()}return t.prototype.getDefaultConfig=function(){return l({},this._defaultConfig)},t.prototype.resetWizard=function(){this._resetWizard.next()},t.prototype.showNextStep=function(){this._showNextStep.next()},t.prototype.showPreviousStep=function(){this._showPreviousStep.next()},t.prototype.showStep=function(t){this._showStep.next(t)},t.prototype.setTheme=function(t){this._setTheme.next(t)},t.prototype.stepChanged=function(t){this._stepChangedArgs.next(t)},t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Optional},{type:e.Inject,args:[y]}]}]},t.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(y,8))},token:t,providedIn:"root"}),t=d([e.Injectable({providedIn:"root"}),f(0,e.Optional()),f(0,e.Inject(y)),g("design:paramtypes",[Object])],t)}(),_=function(){function t(t){this.ngWizardDataService=t}return t.prototype.reset=function(){this.ngWizardDataService.resetWizard()},t.prototype.next=function(){this.ngWizardDataService.showNextStep()},t.prototype.previous=function(){this.ngWizardDataService.showPreviousStep()},t.prototype.show=function(t){this.ngWizardDataService.showStep(t)},t.prototype.theme=function(t){this.ngWizardDataService.setTheme(t)},t.prototype.stepChanged=function(){return this.ngWizardDataService.stepChangedArgs$},t.ctorParameters=function(){return[{type:w}]},t.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(w))},token:t,providedIn:"root"}),t=d([e.Injectable({providedIn:"root"}),g("design:paramtypes",[w])],t)}(),m=function(){function t(){}return Object.defineProperty(t.prototype,"hidden",{get:function(){return this.status!=p.active},enumerable:!0,configurable:!0}),d([e.Input(),g("design:type",String)],t.prototype,"title",void 0),d([e.Input(),g("design:type",String)],t.prototype,"description",void 0),d([e.Input(),g("design:type",String)],t.prototype,"state",void 0),d([e.Input(),g("design:type",e.Type)],t.prototype,"component",void 0),d([e.Input(),g("design:type",Object)],t.prototype,"canEnter",void 0),d([e.Input(),g("design:type",Object)],t.prototype,"canExit",void 0),d([e.HostBinding("hidden"),g("design:type",Boolean),g("design:paramtypes",[])],t.prototype,"hidden",null),t=d([e.Directive()],t)}(),T=function(){function t(t){this.viewContainerRef=t}return t.ctorParameters=function(){return[{type:e.ViewContainerRef}]},t=d([e.Directive({selector:"[ngWizardStepContent]"}),g("design:paramtypes",[e.ViewContainerRef])],t)}(),x=function(n){function o(t){var e=n.call(this)||this;return e.componentFactoryResolver=t,e}var r;return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(o,n),r=o,o.prototype.ngOnInit=function(){this.loadComponent()},o.prototype.loadComponent=function(){if(this.component){var t=this.componentFactoryResolver.resolveComponentFactory(this.component);this.stepContent.viewContainerRef.clear(),this.componentRef=this.stepContent.viewContainerRef.createComponent(t)}},Object.defineProperty(o.prototype,"isHidden",{get:function(){return this.state==t.STEP_STATE.hidden},enumerable:!0,configurable:!0}),o.ctorParameters=function(){return[{type:e.ComponentFactoryResolver}]},d([e.ViewChild(T,{static:!0}),g("design:type",T)],o.prototype,"stepContent",void 0),o=r=d([e.Component({selector:"ng-wizard-step",template:'<div class="tab-pane step-content" style="display: block">\r\n    <ng-content></ng-content>\r\n    <ng-template ngWizardStepContent></ng-template>\r\n</div>',providers:[{provide:m,useExisting:e.forwardRef((function(){return r}))}],styles:[""]}),g("design:paramtypes",[e.ComponentFactoryResolver])],o)}(m),O=function(){function o(t){this.ngWizardDataService=t,this.stepChanged=new e.EventEmitter,this.themeChanged=new e.EventEmitter,this.reseted=new e.EventEmitter,this.styles={},this.showToolbarTop=!1,this.showPreviousButton=!1,this.showNextButton=!1,this.showToolbarBottom=!1,this.showExtraButtons=!1,this.currentStepIndex=null}return Object.defineProperty(o.prototype,"pConfig",{get:function(){return this._pConfig||{}},set:function(t){this._pConfig=t},enumerable:!0,configurable:!0}),o.prototype.ngAfterContentInit=function(){var t=this;this._backupStepStates(),this._init(),this._setToolbar(),this._setEvents(),this.resetWizardWatcher=this.ngWizardDataService.resetWizard$.subscribe((function(){return t._reset()})),this.showNextStepWatcher=this.ngWizardDataService.showNextStep$.subscribe((function(){return t._showNextStep()})),this.showPreviousStepWatcher=this.ngWizardDataService.showPreviousStep$.subscribe((function(){return t._showPreviousStep()})),this.showStepWatcher=this.ngWizardDataService.showStep$.subscribe((function(e){return t._showStep(e)})),this.setThemeWatcher=this.ngWizardDataService.setTheme$.subscribe((function(e){return t._setTheme(e)}))},o.prototype._init=function(){var t=this.ngWizardDataService.getDefaultConfig();this.config=v(t,this.pConfig),this._initSteps(),this._initStyles(),this._showStep(this.config.selected)},o.prototype._initSteps=function(){var e=this;this.steps.forEach((function(e,n){e.index=n,e.status=e.status||p.untouched,e.state=e.state||t.STEP_STATE.normal})),this.config.selected>0&&this.config.anchorSettings.markDoneStep&&this.config.anchorSettings.markAllPreviousStepsAsDone&&this.steps.forEach((function(n){n.state!=t.STEP_STATE.disabled&&n.state!=t.STEP_STATE.hidden&&(n.status=n.index<e.config.selected?p.done:n.status)}))},o.prototype._backupStepStates=function(){this.steps.forEach((function(t){t.initialStatus=t.status,t.initialState=t.state}))},o.prototype._restoreStepStates=function(){this.steps.forEach((function(t){t.status=t.initialStatus,t.state=t.initialState}))},o.prototype._initStyles=function(){this.styles.main="ng-wizard-main ng-wizard-theme-"+this.config.theme,this.styles.step="nav-item",this.config.anchorSettings.enableAllAnchors&&this.config.anchorSettings.anchorClickable&&(this.styles.step+=" clickable"),this.styles.toolbarTop="btn-toolbar ng-wizard-toolbar ng-wizard-toolbar-top justify-content-"+this.config.toolbarSettings.toolbarButtonPosition,this.styles.toolbarBottom="btn-toolbar ng-wizard-toolbar ng-wizard-toolbar-bottom justify-content-"+this.config.toolbarSettings.toolbarButtonPosition,this.styles.previousButton="btn btn-secondary ng-wizard-btn-prev",this.styles.nextButton="btn btn-secondary ng-wizard-btn-next"},o.prototype._setToolbar=function(){this.showToolbarTop=this.config.toolbarSettings.toolbarPosition==t.TOOLBAR_POSITION.top||this.config.toolbarSettings.toolbarPosition==t.TOOLBAR_POSITION.both,this.showToolbarBottom=this.config.toolbarSettings.toolbarPosition==t.TOOLBAR_POSITION.bottom||this.config.toolbarSettings.toolbarPosition==t.TOOLBAR_POSITION.both,this.showPreviousButton=this.config.toolbarSettings.showPreviousButton,this.showNextButton=this.config.toolbarSettings.showNextButton,this.showExtraButtons=this.config.toolbarSettings.toolbarExtraButtons&&this.config.toolbarSettings.toolbarExtraButtons.length>0},o.prototype._setEvents=function(){this.config.keyNavigation},o.prototype._getStepCssClass=function(e){var n=this.styles.step;switch(e.state){case t.STEP_STATE.disabled:n+=" disabled";break;case t.STEP_STATE.error:n+=" danger";break;case t.STEP_STATE.hidden:n+=" hidden"}switch(e.status){case p.done:n+=" done";break;case p.active:n+=" active"}return n},o.prototype._showSelectedStep=function(t,e){if(t.preventDefault(),this.config.anchorSettings.anchorClickable)return!this.config.anchorSettings.enableAnchorOnDoneStep&&e.status==p.done||void(e.index!=this.currentStepIndex&&(this.config.anchorSettings.enableAllAnchors&&this.config.anchorSettings.anchorClickable||e.status==p.done)&&this._showStep(e.index))},o.prototype._showNextStep=function(e){var n=this;e&&e.preventDefault();var o=this.steps.filter((function(e){return e.index>(null==n.currentStepIndex?-1:n.currentStepIndex)&&e.state!=t.STEP_STATE.disabled&&e.state!=t.STEP_STATE.hidden}));if(0==o.length){if(!this.config.cycleSteps)return;this._showStep(0)}else this._showStep(o.shift().index)},o.prototype._showPreviousStep=function(e){var n=this;e&&e.preventDefault();var o=this.steps.filter((function(e){return e.index<(null==n.currentStepIndex&&n.config.cycleSteps?n.steps.length:n.currentStepIndex)&&e.state!=t.STEP_STATE.disabled&&e.state!=t.STEP_STATE.hidden}));if(0==o.length){if(!this.config.cycleSteps)return;this._showStep(this.steps.length-1)}else this._showStep(o.pop().index)},o.prototype._showStep=function(e){var o=this;if(!(e>=this.steps.length||e<0)&&e!=this.currentStepIndex){var i=this.steps.toArray()[e];if(i.state!=t.STEP_STATE.disabled&&i.state!=t.STEP_STATE.hidden)return this._showLoader(),this._isStepChangeValid(i,this.currentStep&&this.currentStep.canExit).toPromise().then((function(t){return t?o._isStepChangeValid(i,i.canEnter).toPromise():n.of(t).toPromise()})).then((function(t){t&&o._loadStepContent(i)})).finally((function(){return o._hideLoader()}))}},o.prototype._isStepChangeValid=function(t,e){if("boolean"==typeof e)return n.of(e);if(e instanceof Function){var o=e({direction:this._getStepDirection(t.index),fromStep:this.currentStep,toStep:t});return n.isObservable(o)?o:"boolean"==typeof o?n.of(o):n.of(!1)}return n.of(!0)},o.prototype._loadStepContent=function(t){this._setAnchor(t),this._setButtons(t.index);var e={step:t,previousStep:this.currentStep,direction:this._getStepDirection(t.index),position:this._getStepPosition(t.index)};this.stepChanged.emit(e),this.ngWizardDataService.stepChanged(e),this.currentStepIndex=t.index,this.currentStep=t},o.prototype._setAnchor=function(t){this.currentStep&&(this.currentStep.status=p.untouched,this.config.anchorSettings.markDoneStep&&(this.currentStep.status=p.done,this.config.anchorSettings.removeDoneStepOnNavigateBack&&this.steps.forEach((function(e){e.index>t.index&&(e.status=p.untouched)})))),t.status=p.active},o.prototype._setButtons=function(t){this.config.cycleSteps||(this.styles.previousButton=0>=t?"btn btn-secondary ng-wizard-btn-prev disabled":"btn btn-secondary ng-wizard-btn-prev",this.steps.length-1<=t?this.styles.nextButton="btn btn-secondary ng-wizard-btn-next disabled":this.styles.nextButton="btn btn-secondary ng-wizard-btn-next")},o.prototype._extraButtonClicked=function(t){t.event&&t.event()},o.prototype._keyNav=function(t){switch(t.which){case 37:this._showPreviousStep(t),t.preventDefault();break;case 39:this._showNextStep(t),t.preventDefault();break;default:return}},o.prototype._showLoader=function(){this.styles.main="ng-wizard-main ng-wizard-theme-"+this.config.theme+" ng-wizard-loading"},o.prototype._hideLoader=function(){this.styles.main="ng-wizard-main ng-wizard-theme-"+this.config.theme},o.prototype._getStepDirection=function(e){return null!=this.currentStepIndex&&this.currentStepIndex!=e?this.currentStepIndex<e?t.STEP_DIRECTIN.forward:t.STEP_DIRECTIN.backward:null},o.prototype._getStepPosition=function(e){return 0==e?t.STEP_POSITION.first:e==this.steps.length-1?t.STEP_POSITION.final:t.STEP_POSITION.middle},o.prototype._setTheme=function(t){if(this.config.theme==t)return!1;this.config.theme=t,this.styles.main="ng-wizard-main ng-wizard-theme-"+this.config.theme,this.themeChanged.emit(this.config.theme)},o.prototype._reset=function(){this.currentStepIndex=null,this.currentStep=null,this._restoreStepStates(),this._init(),this.reseted.emit()},o.prototype.ngOnDestroy=function(){this.resetWizardWatcher&&this.resetWizardWatcher.unsubscribe(),this.showNextStepWatcher&&this.showNextStepWatcher.unsubscribe(),this.showPreviousStepWatcher&&this.showPreviousStepWatcher.unsubscribe(),this.showStepWatcher&&this.showStepWatcher.unsubscribe(),this.setThemeWatcher&&this.setThemeWatcher.unsubscribe()},o.ctorParameters=function(){return[{type:w}]},d([e.ContentChildren(m),g("design:type",e.QueryList)],o.prototype,"steps",void 0),d([e.Input("config"),g("design:type",Object),g("design:paramtypes",[Object])],o.prototype,"pConfig",null),d([e.Output(),g("design:type",Object)],o.prototype,"stepChanged",void 0),d([e.Output(),g("design:type",Object)],o.prototype,"themeChanged",void 0),d([e.Output(),g("design:type",Object)],o.prototype,"reseted",void 0),o=d([e.Component({selector:"ng-wizard",template:'<div id="ngwizard" [ngClass]="styles.main">\r\n    <ul class="nav nav-tabs step-anchor">\r\n        <li *ngFor="let step of steps; let i = index" [ngClass]="_getStepCssClass(step)">\r\n            <a href="#step-{{ i }}" (click)="_showSelectedStep($event, step)" *ngIf="!step.isHidden"\r\n                class="nav-link">{{ step.title }}<br /><small>{{ step.description }}</small></a>\r\n        </li>\r\n    </ul>\r\n\r\n    <div *ngIf="showToolbarTop" [ngClass]="styles.toolbarTop">\r\n        <div class="btn-group mr-2 ng-wizard-btn-group" role="group">\r\n            <button *ngIf="showPreviousButton" [ngClass]="styles.previousButton" type="button"\r\n                (click)="_showPreviousStep($event)">{{ config!.lang!.previous }}</button>\r\n            <button *ngIf="showNextButton" [ngClass]="styles.nextButton" type="button"\r\n                (click)="_showNextStep($event)">{{ config!.lang!.next }}</button>\r\n        </div>\r\n\r\n        <div *ngIf="showExtraButtons" class="btn-group mr-2 ng-wizard-btn-group-extra" role="group">\r\n            <button *ngFor="let button of config!.toolbarSettings!.toolbarExtraButtons; let j = index"\r\n                [ngClass]="button.class" type="button" (click)="_extraButtonClicked(button)">{{ button.text }}</button>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="ng-wizard-container tab-content">\r\n        <ng-content></ng-content>\r\n    </div>\r\n\r\n    <div *ngIf="showToolbarBottom" [ngClass]="styles.toolbarBottom">\r\n        <div class="btn-group mr-2 ng-wizard-btn-group" role="group">\r\n            <button *ngIf="showPreviousButton" [ngClass]="styles.previousButton" type="button"\r\n                (click)="_showPreviousStep($event)">{{ config!.lang!.previous }}</button>\r\n            <button *ngIf="showNextButton" [ngClass]="styles.nextButton" type="button"\r\n                (click)="_showNextStep($event)">{{ config!.lang!.next }}</button>\r\n        </div>\r\n\r\n        <div *ngIf="showExtraButtons" class="btn-group mr-2 ng-wizard-btn-group-extra" role="group">\r\n            <button *ngFor="let button of config!.toolbarSettings!.toolbarExtraButtons; let j = index"\r\n                [ngClass]="button.class" type="button" (click)="_extraButtonClicked(button)">{{ button.text }}</button>\r\n        </div>\r\n    </div>\r\n</div>',styles:[""]}),g("design:paramtypes",[w])],o)}(),P=function(){function t(){}var n;return n=t,t.forRoot=function(t){return{ngModule:n,providers:[{provide:y,useValue:t}]}},t=n=d([e.NgModule({imports:[o.CommonModule],declarations:[O,x,T],exports:[O,x]})],t)}();t.NgWizardComponent=O,t.NgWizardModule=P,t.NgWizardService=_,t.NgWizardStep=m,t.NgWizardStepComponent=x,t.ɵa=w,t.ɵb=y,t.ɵc=T,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-wizard.umd.min.js.map